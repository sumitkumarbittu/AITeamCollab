<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PS16 - Collaborative Workspace</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">
  <!-- Cytoscape.js CSS -->
  <script src="https://unpkg.com/cytoscape@3.23.0/dist/cytoscape.min.js"></script>
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="logo">
      <h1>PS16</h1>
      <p>Collaborative Workspace</p>
    </div>
    <div class="nav-menu">
      <div class="nav-item active" data-view="create">
        <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
        </svg>
        Create
      </div>

      <div class="nav-item" data-view="ai-suggestions">
        <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
        </svg>
        AI Suggestions
      </div>

      <div class="nav-item" data-view="graph">
        <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-6a2 2 0 012-2h6"/>
        </svg>
        Graph
      </div>

      <div class="nav-item" data-view="ideas">
        <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
        </svg>
        Ideas
      </div>

      <div class="nav-item" data-view="events">
        <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
        </svg>
        Events
      </div>

      <div class="nav-item" data-view="projects">
        <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>
        </svg>
        Projects
      </div>
      <div class="nav-item" data-view="tasks">
        <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
        </svg>
        Tasks
      </div>
      <div class="nav-item" data-view="attachments">
        <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"/>
        </svg>
        Attachments
      </div>
      <div class="nav-item" data-view="calendar">
        <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M8 7V3h8v4M3 11h18M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
        </svg>
        Calendar
      </div>
      
      <div class="nav-item" data-view="alerts">
        <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
        </svg>
        Alerts
      </div>

      <!-- Separator -->
      <div style="border-top: 1px solid rgba(255,255,255,0.1); margin: 12px 0; padding-top: 12px;"></div>

      <!-- Export Button -->
      <div class="nav-item export-btn" id="export-data-btn">
        <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
        </svg>
        Export Data
      </div>

    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <div class="header">
      <h2 id="view-title">Projects</h2>
      <p id="view-subtitle">Manage your projects and track progress</p>
    </div>

    <div class="content-area" id="content-area">
      <!-- Create View - Centralized Create/Update Forms -->
      <section id="create-view" class="view-section">
        <!-- Tab Navigation -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">‚ú® Create New Items</h3>
            <p style="margin: 0; color: #6b7280; font-size: 0.9rem;">Choose what you want to create</p>
          </div>
          <div class="create-tabs">
            <button class="create-tab active" data-tab="project">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>
              </svg>
              Project
            </button>
            <button class="create-tab" data-tab="task">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
              </svg>
              Task
            </button>
            <button class="create-tab" data-tab="event">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
              </svg>
              Event
            </button>
            <button class="create-tab" data-tab="idea">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
              </svg>
              Idea
            </button>
          </div>
        </div>

        <!-- Create Project Form -->
        <div class="create-content active" data-content="project">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">üìÅ Create New Project</h3>
            </div>
            <div class="form-grid" style="padding: 16px 24px; background: #f8f9fa; border-radius: 8px; margin-bottom: 16px;">
              <label style="grid-column: 1 / -1; font-weight: 600; color: #424242; margin-bottom: 8px;">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="display: inline; vertical-align: middle; margin-right: 4px;">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"/>
                </svg>
                Quick Edit: Select Existing Project
              </label>
              <select class="form-select" id="project-selector" style="grid-column: 1 / -1;">
                <option value="">‚ûï Create New Project</option>
              </select>
              <small style="grid-column: 1 / -1; color: #6b7280; font-size: 0.85rem; margin-top: -8px;">
                üí° Select a project above to edit it, or create a new one below
              </small>
            </div>
            <form id="create-project-form" class="form-grid">
              <input type="text" class="form-input" id="project-name" placeholder="Project name *" required />
              <input type="date" class="form-input" id="project-start" placeholder="Start date" />
              <input type="date" class="form-input" id="project-end" placeholder="End date" />
              <textarea class="form-textarea" id="project-desc" placeholder="Project description"></textarea>
              <div class="form-actions" style="grid-column: 1 / -1; display: flex; gap: 12px;">
                <button type="submit" class="btn btn-primary">
                  <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                  </svg>
                  Create Project
                </button>
                <button type="button" class="btn btn-secondary" id="cancel-project-btn">Cancel</button>
              </div>
            </form>
          </div>
        </div>

        <!-- Create Task Form -->
        <div class="create-content" data-content="task">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">‚úì Create New Task</h3>
            </div>
            <div class="form-grid" style="padding: 16px 24px; background: #f8f9fa; border-radius: 8px; margin-bottom: 16px;">
              <label style="grid-column: 1 / -1; font-weight: 600; color: #424242; margin-bottom: 8px;">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="display: inline; vertical-align: middle; margin-right: 4px;">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"/>
                </svg>
                Quick Edit: Select Existing Task
              </label>
              <select class="form-select" id="task-selector" style="grid-column: 1 / -1;">
                <option value="">‚ûï Create New Task</option>
              </select>
              <small style="grid-column: 1 / -1; color: #6b7280; font-size: 0.85rem; margin-top: -8px;">
                üí° Select a task above to edit it, or create a new one below
              </small>
            </div>
            <form id="create-task-form" class="form-grid">
              <select class="form-select" id="task-project-select" required>
                <option value="">Select Project *</option>
              </select>
              <input type="text" class="form-input" id="task-title" placeholder="Task title *" required />
              <input type="text" class="form-input" id="task-assigned" placeholder="Assigned to" />
              <input type="date" class="form-input" id="task-due" placeholder="Due date" />
              <div class="priority-slider-container">
                <label class="priority-label">
                  <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"/>
                  </svg>
                  <span>Task Priority</span>
                </label>
                <div class="priority-display" id="priority-display">
                  <span class="priority-badge priority-3">üü° Medium</span>
                </div>
                <input type="range" class="priority-slider" id="task-priority" min="1" max="5" value="3" step="1">
                <div class="priority-labels">
                  <span class="priority-high">Urgent</span>
                  <span class="priority-normal">Medium</span>
                  <span class="priority-low">Minimal</span>
                </div>
              </div>
              
              <div class="relationship-container">
                <div class="relationship-box">
                  <label class="relationship-label">
                    <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
                    </svg>
                    <span>Parent Task (Subtask of)</span>
                  </label>
                  <select class="form-select relationship-select" id="task-parent-select">
                    <option value="">None (Independent Task)</option>
                  </select>
                  <small class="relationship-help">
                    üí° Make this task a subtask of another parent task
                  </small>
                </div>
                
                <div class="relationship-box">
                  <label class="relationship-label">
                    <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"/>
                    </svg>
                    <span>Depends On Task</span>
                  </label>
                  <select class="form-select relationship-select" id="task-depends-select">
                    <option value="">No Dependencies</option>
                  </select>
                  <small class="relationship-help">
                    üí° Block this task until the selected task is completed
                  </small>
                </div>
              </div>
              
              <div class="form-actions" style="grid-column: 1 / -1; display: flex; gap: 12px;">
                <button type="submit" class="btn btn-primary">
                  <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                  </svg>
                  Create Task
                </button>
                <button type="button" class="btn btn-secondary" id="cancel-task-btn">Cancel</button>
              </div>
            </form>
          </div>
        </div>

        <!-- Create Event Form -->
        <div class="create-content" data-content="event">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">üìÖ Create New Event</h3>
            </div>
            <div class="card-body">
              <div class="form-grid" style="padding: 16px 24px; background: #f8f9fa; border-radius: 8px; margin-bottom: 16px;">
                <label style="grid-column: 1 / -1; font-weight: 600; color: #424242; margin-bottom: 8px;">
                  <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="display: inline; vertical-align: middle; margin-right: 4px;">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"/>
                  </svg>
                  Quick Edit: Select Existing Event
                </label>
                <select class="form-select" id="event-selector" style="grid-column: 1 / -1;">
                  <option value="">‚ûï Create New Event</option>
                </select>
                <small style="grid-column: 1 / -1; color: #6b7280; font-size: 0.85rem; margin-top: -8px;">
                  üí° Select an event above to edit it, or create a new one below
                </small>
              </div>
              <form id="event-form" class="event-form">
                <div class="form-grid">
                  <div class="form-group">
                    <label for="event-name">Event Name *</label>
                    <input type="text" id="event-name" required placeholder="Enter event name">
                  </div>

                  <div class="form-group">
                    <label for="event-organisation">Organisation</label>
                    <input type="text" id="event-organisation" placeholder="Enter organisation (optional)" list="organisation-list">
                    <datalist id="organisation-list"></datalist>
                  </div>

                  <div class="form-group">
                    <label for="event-platform">Platform</label>
                    <input type="text" id="event-platform" placeholder="Enter platform (optional)" list="platform-list">
                    <datalist id="platform-list"></datalist>
                  </div>

                  <div class="form-group">
                    <label for="event-team-size">Team Size</label>
                    <input type="number" id="event-team-size" min="1" placeholder="Enter team size (optional)">
                  </div>

                  <div class="form-group">
                    <label for="event-slots">Team Slots Available</label>
                    <input type="number" id="event-slots" min="0" placeholder="Enter slots available (optional)">
                  </div>

                  <div class="form-group">
                    <label for="event-added-by">Added By *</label>
                    <input type="text" id="event-added-by" required placeholder="Enter your name">
                  </div>

                  <div class="form-group">
                    <label for="event-start-date">Start Date</label>
                    <input type="date" id="event-start-date" placeholder="Start date (optional)">
                  </div>

                  <div class="form-group">
                    <label for="event-start-time">Start Time</label>
                    <input type="time" id="event-start-time" placeholder="Start time (optional)">
                  </div>

                  <div class="form-group">
                    <label for="event-end-date">End Date *</label>
                    <input type="date" id="event-end-date" required>
                  </div>

                  <div class="form-group">
                    <label for="event-end-time">End Time *</label>
                    <input type="time" id="event-end-time" value="23:59" required>
                  </div>

                  <div class="form-group full-width">
                    <label for="event-members">Team Member Names</label>
                    <input type="text" id="event-members" placeholder="Enter names separated by commas (optional)">
                    <small style="color: #6b7280; margin-top: 4px; display: block;">Example: John Doe, Jane Smith, Mike Johnson</small>
                  </div>
                </div>

                <div class="form-actions">
                  <button type="submit" class="btn btn-primary" id="create-event-btn">
                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin-right: 8px;">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                    </svg>
                    Create Event
                  </button>
                  
                  <button type="button" class="btn btn-secondary" id="cancel-event-btn">
                    Cancel
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>

        <!-- Create Idea Form -->
        <div class="create-content" data-content="idea">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">üí° Submit New Idea</h3>
            </div>
            <div class="card-body">
              <div class="form-grid" style="padding: 16px 24px; background: #f8f9fa; border-radius: 8px; margin-bottom: 16px;">
                <label style="grid-column: 1 / -1; font-weight: 600; color: #424242; margin-bottom: 8px;">
                  <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="display: inline; vertical-align: middle; margin-right: 4px;">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"/>
                  </svg>
                  Quick Edit: Select Existing Idea
                </label>
                <select class="form-select" id="idea-selector" style="grid-column: 1 / -1;">
                  <option value="">‚ûï Create New Idea</option>
                </select>
                <small style="grid-column: 1 / -1; color: #6b7280; font-size: 0.85rem; margin-top: -8px;">
                  üí° Select an idea above to edit it, or create a new one below
                </small>
              </div>
              <form id="idea-form" class="idea-form">
                <div class="form-grid">
                  <div class="form-group full-width">
                    <label for="idea-title">Idea Title *</label>
                    <input type="text" id="idea-title" required placeholder="Enter a catchy title for your idea">
                  </div>

                  <div class="form-group full-width">
                    <label for="idea-description">Idea Description *</label>
                    <textarea id="idea-description" required placeholder="Describe your idea in detail..." rows="4"></textarea>
                  </div>

                  <div class="form-group">
                    <label for="idea-added-by">Added By *</label>
                    <input type="text" id="idea-added-by" required placeholder="Your name" list="idea-names-list">
                    <datalist id="idea-names-list"></datalist>
                  </div>

                  <div class="form-group">
                    <label for="idea-status">Status</label>
                    <select id="idea-status">
                      <option value="proposed">Proposed</option>
                      <option value="under review">Under Review</option>
                      <option value="in progress">In Progress</option>
                      <option value="implemented">Implemented</option>
                      <option value="archived">Archived</option>
                    </select>
                  </div>

                  <div class="form-group full-width">
                    <label for="idea-priority">Priority: <span id="idea-priority-value">Medium</span></label>
                    <input type="range" id="idea-priority" min="1" max="5" value="3" class="priority-slider">
                    <div class="priority-labels">
                      <span class="priority-high">Urgent</span>
                      <span class="priority-normal">Medium</span>
                      <span class="priority-low">Minimal</span>
                    </div>
                  </div>

                  <div class="form-group full-width">
                    <label>Attachments (Max 3)</label>
                    <div id="idea-attachments-container">
                      <div class="attachment-input-group">
                        <input type="file" id="idea-attachment-1" class="idea-attachment-input" accept="image/*,.pdf,.doc,.docx">
                        <input type="text" id="idea-caption-1" class="idea-caption-input" placeholder="Caption (optional)">
                      </div>
                      <div class="attachment-input-group" style="display:none;">
                        <input type="file" id="idea-attachment-2" class="idea-attachment-input" accept="image/*,.pdf,.doc,.docx">
                        <input type="text" id="idea-caption-2" class="idea-caption-input" placeholder="Caption (optional)">
                      </div>
                      <div class="attachment-input-group" style="display:none;">
                        <input type="file" id="idea-attachment-3" class="idea-attachment-input" accept="image/*,.pdf,.doc,.docx">
                        <input type="text" id="idea-caption-3" class="idea-caption-input" placeholder="Caption (optional)">
                      </div>
                    </div>
                    <button type="button" class="btn btn-secondary btn-small" id="add-attachment-btn" style="margin-top:8px;">+ Add Attachment</button>
                  </div>
                </div>

                <div class="form-actions">
                  <button type="submit" class="btn btn-primary" id="submit-idea-btn">
                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin-right: 8px;">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                    </svg>
                    Submit Idea
                  </button>
                  <button type="button" class="btn btn-secondary" id="cancel-idea-btn">Cancel</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </section>

      <!-- AI Suggestions View -->
      <section id="ai-suggestions-view" class="view-section" style="display:none;">
        <!-- Info Banner -->
        <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin-bottom: 20px;">
          <div style="padding: 20px;">
            <h3 style="margin: 0 0 10px 0; display: flex; align-items: center; gap: 10px;">
              <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="flex-shrink: 0;">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
              </svg>
              AI-Powered Task Intelligence
            </h3>
            <p style="margin: 0; opacity: 0.95; font-size: 0.95rem;">
              Get strategic insights, risk analysis, and actionable recommendations for your tasks powered by Google Gemini AI
            </p>
          </div>
        </div>

        <!-- Main AI Suggestions Card -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">üß† Task Suggestions</h3>
            <button class="btn btn-secondary" id="refreshAIBtn">
              <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="display: inline-block; vertical-align: middle; margin-right: 5px;">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
              </svg>
              Refresh Tasks
            </button>
          </div>

          <!-- Filter Buttons -->
          <div style="margin: 15px 0; display: flex; gap: 10px; flex-wrap: wrap; padding: 0 5px;">
            <button class="filter-btn active" data-filter="all">
              <span>üìä</span> All Tasks
            </button>
            <button class="filter-btn" data-filter="todo">
              <span>üìù</span> To-Do
            </button>
            <button class="filter-btn" data-filter="in_progress">
              <span>üîÑ</span> In Progress
            </button>
            <button class="filter-btn" data-filter="done">
              <span>‚úÖ</span> Completed
            </button>
            <button class="filter-btn" data-filter="overdue">
              <span>‚ö†Ô∏è</span> Overdue
            </button>
          </div>

          <!-- Task List Container -->
          <div id="taskListAI" style="margin-top: 15px;">
            <div class="empty-state">
              <svg class="empty-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
              </svg>
              <p>ü§ñ Loading tasks for AI analysis...</p>
              <small style="color: #999; margin-top: 10px; display: block;">Click any task to get intelligent suggestions</small>
            </div>
          </div>
        </div>

        <!-- Help Card -->
        <div class="card" style="background: #f8f9fa; border-left: 4px solid #4b6cb7; margin-top: 20px;">
          <div style="padding: 15px;">
            <h4 style="margin: 0 0 10px 0; color: #2c3e50; font-size: 1rem;">
              üí° How to Use AI Suggestions
            </h4>
            <ul style="margin: 0; padding-left: 20px; color: #666; font-size: 0.9rem; line-height: 1.8;">
              <li><strong>Click any task</strong> to generate AI-powered insights</li>
              <li>Get <strong>6 strategic perspectives</strong>: Next actions, risks, tips, collaboration, time management, and success criteria</li>
              <li>Use <strong>filters</strong> to focus on specific task statuses</li>
              <li>AI considers <strong>priority, deadlines, and urgency</strong> automatically</li>
              <li>Click the task again to <strong>close suggestions</strong></li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Graph View -->
      <section id="graph-view" class="view-section" style="display:none;">
        <!-- Enhanced Graph Controls -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">üé® Graph Controls & Visualization</h3>
            <div style="display: flex; gap: 8px;">
              <button id="refreshGraph" class="btn btn-secondary">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                </svg>
                Refresh
              </button>
              <button id="exportGraph" class="btn btn-primary">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                </svg>
                Export PNG
              </button>
            </div>
          </div>
          
          <!-- Controls Grid -->
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 16px;">
            
            <!-- Layout Controls -->
            <div class="graph-control-group">
              <label class="graph-control-label">
                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-3zM14 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1h-4a1 1 0 01-1-1v-3z"/>
                </svg>
                Layout Algorithm
              </label>
              <select id="layoutSelect" class="form-select">
                <option value="breadthfirst">üå≥ Hierarchical</option>
                <option value="cose">üåÄ Force-Directed</option>
                <option value="concentric">üéØ Concentric</option>
                <option value="grid">‚äû Grid</option>
                <option value="circle">‚≠ï Circle</option>
                <option value="dagre">üìä Dagre (Tree)</option>
                <option value="cola">üîó Cola (Web)</option>
              </select>
            </div>
            
            <!-- Zoom Controls -->
            <div class="graph-control-group">
              <label class="graph-control-label">
                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v6m3-3H7"/>
                </svg>
                Zoom & Pan
              </label>
              <div class="zoom-controls">
                <button id="zoomIn" class="zoom-btn" title="Zoom In">
                  <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                  </svg>
                </button>
                <button id="zoomOut" class="zoom-btn" title="Zoom Out">
                  <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"/>
                  </svg>
                </button>
                <button id="fitGraph" class="zoom-btn" title="Fit to Screen">
                  <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 4h-4m4 0l-5-5"/>
                  </svg>
                </button>
                <button id="resetView" class="zoom-btn" title="Reset View">
                  <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"/>
                  </svg>
                </button>
              </div>
            </div>
            
            <!-- Filter Controls -->
            <div class="graph-control-group">
              <label class="graph-control-label">
                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"/>
                </svg>
                Display Filters
              </label>
              <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                <label class="filter-checkbox">
                  <input type="checkbox" id="showProjects" checked>
                  <span>üìÅ Projects</span>
                </label>
                <label class="filter-checkbox">
                  <input type="checkbox" id="showTasks" checked>
                  <span>‚úì Tasks</span>
                </label>
                <label class="filter-checkbox">
                  <input type="checkbox" id="showEdges" checked>
                  <span>‚Üí Edges</span>
                </label>
              </div>
            </div>
            
            <!-- Search Control -->
            <div class="graph-control-group">
              <label class="graph-control-label">
                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
                Search & Highlight
              </label>
              <div style="display: flex; gap: 8px;">
                <input type="text" id="searchGraph" class="form-input" placeholder="Search nodes..." style="margin: 0;">
                <button id="clearSearch" class="btn btn-secondary" style="padding: 8px 12px;">Clear</button>
              </div>
            </div>
            
          </div>
          
          <!-- Graph Stats -->
          <div id="graphStats" style="margin-top: 16px; padding: 12px; background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); border-radius: 8px; display: flex; gap: 24px; flex-wrap: wrap; font-size: 0.9rem;">
            <div style="display: flex; align-items: center; gap: 8px;">
              <span style="font-weight: 600;">üìÅ Projects:</span>
              <span id="projectCount" style="color: #3498db; font-weight: 700;">0</span>
            </div>
            <div style="display: flex; align-items: center; gap: 8px;">
              <span style="font-weight: 600;">‚úì Tasks:</span>
              <span id="taskCount" style="color: #10b981; font-weight: 700;">0</span>
            </div>
            <div style="display: flex; align-items: center; gap: 8px;">
              <span style="font-weight: 600;">‚Üí Connections:</span>
              <span id="edgeCount" style="color: #6366f1; font-weight: 700;">0</span>
            </div>
            <div style="display: flex; align-items: center; gap: 8px;">
              <span style="font-weight: 600;">üîç Zoom:</span>
              <span id="zoomLevel" style="color: #f59e0b; font-weight: 700;">100%</span>
            </div>
          </div>
        </div>

        <!-- Graph Visualization Card -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Project & Task Relationship Graph</h3>
          </div>
          <div style="position: relative;">
            <!-- Enhanced Legend -->
            <div class="graph-legend-enhanced">
              <div class="legend-title">üìñ Legend</div>
              <div class="legend-items">
                <div class="graph-legend-item">
                  <div class="graph-legend-color belongs-to"></div>
                  <span>Project ‚Üí Task</span>
                </div>
                <div class="graph-legend-item">
                  <div class="graph-legend-color subtask"></div>
                  <span>Parent ‚Üí Child</span>
                </div>
                <div class="graph-legend-item">
                  <div class="graph-legend-color depends-on"></div>
                  <span>Dependencies</span>
                </div>
              </div>
            </div>
            
            <!-- Interactive Instructions Banner -->
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px 20px; border-radius: 8px; margin-bottom: 16px; display: flex; align-items: center; gap: 12px; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);">
              <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="flex-shrink: 0;">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              <div style="flex: 1;">
                <strong style="font-size: 0.95rem;">üñ±Ô∏è Interactive Controls:</strong>
                <span style="font-size: 0.9rem; opacity: 0.95;"> Click nodes to edit ‚Ä¢ Drag to pan ‚Ä¢ Scroll to zoom ‚Ä¢ Hover to highlight ‚Ä¢ Use controls above for more options</span>
              </div>
            </div>
            
            <!-- Graph Container -->
            <div id="cy" style="width:100%; height:650px; border: 2px solid #e2e8f0; border-radius: 12px; background: #fff; position: relative;"></div>
            
            <!-- Floating Mini-Map (placeholder for future enhancement) -->
            <div id="miniMap" style="position: absolute; bottom: 16px; left: 16px; width: 150px; height: 100px; background: rgba(255,255,255,0.9); border: 2px solid #e2e8f0; border-radius: 8px; display: none; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
              <div style="padding: 8px; text-align: center; font-size: 0.75rem; color: #64748b;">Mini-Map</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Projects Section -->
      <section id="projects-view" class="view-section" style="display:none;">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">All Projects</h3>
          </div>
          <div class="items-list" id="projects-list">
            <div class="empty-state">
              <svg class="empty-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>
              </svg>
              <p>No projects yet. Create your first project above!</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Tasks Section -->
      <section id="tasks-view" class="view-section" style="display: none;">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">All Tasks</h3>
          </div>
          <div class="items-list" id="tasks-list">
            <div class="empty-state">
              <svg class="empty-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
              </svg>
              <p>No tasks yet. Create your first task above!</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Attachments Section -->
      <section id="attachments-view" class="view-section" style="display: none;">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Upload Attachment</h3>
          </div>
          <form id="upload-form">
            <div class="form-grid">
              <select class="form-select" id="upload-task-select" required>
                <option value="">Select Task *</option>
              </select>
              <input type="text" class="form-input" id="upload-by" placeholder="Your name/email" />
            </div>
            <div class="file-upload-wrapper" onclick="document.getElementById('upload-file').click()">
              <input type="file" id="upload-file" />
              <label class="file-upload-label">
                <svg width="32" height="32" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin: 0 auto 8px; display: block;">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                </svg>
                Click to select file or drag and drop
              </label>
              <div id="file-name-display" class="file-name-display"></div>
            </div>
            <button type="submit" class="btn btn-primary">
              <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
              </svg>
              Upload Attachment
            </button>
          </form>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">All Attachments</h3>
          </div>
          <div class="items-list" id="attachments-list">
            <div class="empty-state">
              <svg class="empty-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"/>
              </svg>
              <p>No attachments yet. Upload your first file above!</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Calendar Section -->
      <section id="calendar-view" class="view-section" style="display:none;">
        <!-- Enhanced Calendar Controls -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">üìÖ Interactive Task Calendar</h3>
            <div style="display: flex; gap: 8px; flex-wrap: wrap;">
              <button id="todayBtn" class="btn btn-secondary">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                </svg>
                Today
              </button>
              <button id="refreshCalendar" class="btn btn-secondary">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                </svg>
                Refresh
              </button>
              <button id="addCalendarTask" class="btn btn-primary">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                </svg>
                Quick Add Task
              </button>
            </div>
          </div>
          
          <!-- Calendar Filters and Info -->
          <div style="padding: 0 24px 16px 24px;">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">
              
              <!-- Status Filters -->
              <div class="calendar-control-group">
                <label class="calendar-control-label">
                  <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"/>
                  </svg>
                  Filter by Status
                </label>
                <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                  <label class="calendar-filter-chip">
                    <input type="checkbox" id="filterTodo" checked>
                    <span class="chip-todo">üìù To-Do</span>
                  </label>
                  <label class="calendar-filter-chip">
                    <input type="checkbox" id="filterInProgress" checked>
                    <span class="chip-progress">üîÑ In Progress</span>
                  </label>
                  <label class="calendar-filter-chip">
                    <input type="checkbox" id="filterDone" checked>
                    <span class="chip-done">‚úÖ Done</span>
                  </label>
                  <label class="calendar-filter-chip">
                    <input type="checkbox" id="filterOverdue" checked>
                    <span class="chip-overdue">‚ö†Ô∏è Overdue</span>
                  </label>
                </div>
              </div>
              
              <!-- Calendar Stats -->
              <div class="calendar-control-group">
                <label class="calendar-control-label">
                  <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                  </svg>
                  Current Period Stats
                </label>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin-top: 4px;">
                  <div class="calendar-stat-badge">
                    <span class="stat-label">Total Tasks:</span>
                    <span class="stat-value" id="calTotalTasks">0</span>
                  </div>
                  <div class="calendar-stat-badge">
                    <span class="stat-label">Completed:</span>
                    <span class="stat-value stat-success" id="calCompletedTasks">0</span>
                  </div>
                  <div class="calendar-stat-badge">
                    <span class="stat-label">Pending:</span>
                    <span class="stat-value stat-warning" id="calPendingTasks">0</span>
                  </div>
                  <div class="calendar-stat-badge">
                    <span class="stat-label">Overdue:</span>
                    <span class="stat-value stat-danger" id="calOverdueTasks">0</span>
                  </div>
                </div>
              </div>
              
            </div>
            
            <!-- Interactive Help Banner -->
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px 20px; border-radius: 8px; margin-top: 16px; display: flex; align-items: center; gap: 12px; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);">
              <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="flex-shrink: 0;">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              <div style="flex: 1;">
                <strong style="font-size: 0.95rem;">üñ±Ô∏è Interactive Features:</strong>
                <span style="font-size: 0.9rem; opacity: 0.95;"> Click events for details ‚Ä¢ Drag to reschedule ‚Ä¢ Double-click empty dates to create tasks ‚Ä¢ Hover for quick info</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Calendar Display -->
        <div class="card">
          <div id="calendar-container" style="padding: 20px; position: relative;">
            <div id="calendar" style="height: 650px;"></div>
            
            <!-- Loading Overlay -->
            <div id="calendarLoading" style="display: none; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.9); z-index: 1000; align-items: center; justify-content: center; flex-direction: column;">
              <div class="loading-spinner" style="width: 50px; height: 50px; border: 4px solid #f3f3f3; border-top: 4px solid #667eea; border-radius: 50%; animation: spin 1s linear infinite;"></div>
              <p style="margin-top: 16px; color: #667eea; font-weight: 600;">Loading calendar...</p>
            </div>
          </div>
        </div>
      </section>

      <!-- ============================================
           EVENTS SECTION
           ============================================
           This section contains the Events management interface with:
           1. Event Creation Form - All fields for creating new events
           2. Events List - Display of all created events with edit/delete actions
           
           Initial state: Hidden (display:none)
           Shown when: User clicks "Events" in sidebar navigation
           ============================================ -->
      <section id="events-view" class="view-section" style="display:none;">
        <!-- ========================================
             EVENTS LIST CARD
             ========================================
             Displays all created events in card format
             - Initially shows empty state
             - Populated dynamically by JavaScript
             - Each event card has edit/delete buttons
             ======================================== -->
        <div class="card" style="margin-top: 24px;">
          <div class="card-header">
            <h3>üìã All Events</h3>
            
            <!-- HEADER ACTIONS
                 Refresh button to manually reload events -->
            <div class="header-actions">
              <button class="btn btn-secondary" id="refresh-events-btn">
                <!-- Refresh icon (circular arrow) -->
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                </svg>
                Refresh
              </button>
            </div>
          </div>
          
          <div class="card-body">
            <!-- EVENTS CONTAINER
                 This div's content is completely replaced by JavaScript
                 Initial content: Empty state message
                 After loading: Event cards OR empty state if no events -->
            <div id="events-list">
              <!-- ========================================
                   INITIAL EMPTY STATE
                   ========================================
                   Shown when:
                   - Page first loads before events are fetched
                   - After deleting all events
                   - If database has no events
                   
                   Will be replaced by JavaScript with:
                   - Event cards (if events exist)
                   - Empty state (if no events)
                   - Error message (if fetch fails)
                   ======================================== -->
              <div class="empty-state">
                <!-- Calendar icon for visual context -->
                <svg width="64" height="64" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin: 0 auto 16px; opacity: 0.3;">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                </svg>
                <p>No events created yet</p>
                <small style="color: #999;">Create your first event using the form above</small>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Ideas Section -->
      <section id="ideas-view" class="view-section" style="display:none;">
        <!-- Ideas List -->
        <div class="card" style="margin-top: 24px;">
          <div class="card-header">
            <h3>üìã All Ideas</h3>
            <div class="header-actions">
              <button class="btn btn-secondary" id="refresh-ideas-btn">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                </svg>
                Refresh
              </button>
            </div>
          </div>
          <div class="card-body">
            <div id="ideas-list">
              <div class="empty-state">
                <svg width="64" height="64" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin: 0 auto 16px; opacity: 0.3;">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                </svg>
                <p>No ideas submitted yet</p>
                <small style="color: #999;">Be the first to share your brilliant idea!</small>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Alerts Section -->
      <section id="alerts-view" class="view-section" style="display:none;">
        <div class="card">
          <div class="card-header">
            <h3>üîî Notifications & Alerts</h3>
            <div style="display: flex; gap: 8px;">
              <button class="btn btn-secondary" id="mark-all-read">Mark All as Read</button>
              <button class="btn btn-secondary" id="clear-all-alerts">Clear All</button>
            </div>
          </div>
          <div class="card-body">
            <div id="alerts-list">
              <!-- Alerts will be dynamically loaded here -->
              <div class="empty-state">
                <svg width="64" height="64" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin: 0 auto 16px; opacity: 0.3;">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
                </svg>
                <p>No alerts at the moment</p>
                <small style="color: #999;">You'll be notified about important updates here</small>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>

  <!-- Minimized Activity Button -->
  <button id="activity-minimized-btn" class="minimized-widget-btn left" style="display: none;">
    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
    </svg>
    <span class="notification-badge">0</span>
  </button>

  <!-- Enhanced Floating Activity Log Widget -->
  <div id="activity-widget" class="draggable">
    <div id="activity-header">
      <div class="activity-title">
        <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/>
        </svg>
        <span>Activity Log</span>
      </div>
      <div class="activity-controls">
        <button id="clear-all-activity" title="Clear All Activity Logs">
          <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
          </svg>
        </button>
        <button id="clear-activity-filters" title="Clear Filters" style="display: none;">
          <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
        <button id="refresh-activity" title="Refresh">
          <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
          </svg>
        </button>
        <button id="toggle-activity" title="Minimize">‚àí</button>
      </div>
    </div>
    
    <!-- Activity Filters -->
    <div id="activity-filters" style="padding: 12px; background: #f8f9fa; border-bottom: 1px solid #e5e7eb;">
      <div style="display: flex; gap: 6px; flex-wrap: wrap; margin-bottom: 8px;">
        <button class="activity-filter-btn active" data-filter="all">All</button>
        <button class="activity-filter-btn" data-filter="project">üìÅ Projects</button>
        <button class="activity-filter-btn" data-filter="task">‚úì Tasks</button>
        <button class="activity-filter-btn" data-filter="attachment">üìé Files</button>
        <button class="activity-filter-btn" data-filter="chat">üí¨ Chat</button>
      </div>
      <div style="display: flex; gap: 6px; flex-wrap: wrap;">
        <button class="activity-action-btn active" data-action="all">All Actions</button>
        <button class="activity-action-btn" data-action="created">‚ûï Created</button>
        <button class="activity-action-btn" data-action="updated">‚úèÔ∏è Updated</button>
        <button class="activity-action-btn" data-action="deleted">üóëÔ∏è Deleted</button>
      </div>
      <input type="text" id="activity-search" placeholder="üîç Search activities..." style="width: 100%; margin-top: 8px; padding: 8px 10px; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 0.85rem; font-family: inherit;">
    </div>
    
    <div id="activity-body">
      <div id="activity-content">
        <div class="activity-loading">
          <div class="loading-spinner"></div>
          <p>Loading activities...</p>
        </div>
      </div>
    </div>
    
    <div id="activity-footer">
      <span class="activity-count">0 activities</span>
      <span class="activity-filter-status"></span>
      <span class="activity-live">‚óè Live</span>
    </div>
    
    <!-- Resize Handle for Activity Widget -->
    <div id="activity-resize-handle"></div>
  </div>

  <!-- Minimized Chat Button -->
  <button id="chat-minimized-btn" class="minimized-widget-btn right" style="display: none;">
    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
    </svg>
    <span class="notification-badge">0</span>
  </button>

  <!-- Floating Chat Widget -->
  <div id="chat-widget" class="draggable resizable">
    <div id="chat-header">
      <div class="chat-title">
        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
        </svg>
        <span>Team Chat</span>
        <span class="chat-online-count">‚óè 1 online</span>
      </div>
      <div class="chat-controls">
        <button id="clear-chat" title="Clear chat">
          <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
          </svg>
        </button>
        <button id="toggle-chat" title="Minimize">‚àí</button>
      </div>
    </div>

    <div id="chat-body">
      <div id="chat-box" class="chat-box">
        <div class="chat-welcome">
          <div class="welcome-icon">üí¨</div>
          <h3>Welcome to Team Chat</h3>
          <p>Start a conversation with your team</p>
        </div>
      </div>
      
      <div class="chat-typing-indicator" id="typing-indicator" style="display: none;">
        <span></span>
        <span></span>
        <span></span>
      </div>
      
      <form id="message-form" class="message-form">
        <div class="user-avatar-input">
          <div class="user-avatar">
            <svg width="18" height="18" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
            </svg>
          </div>
          <input type="text" id="name-input" placeholder="Your name (optional)" autocomplete="name">
        </div>
        <div class="message-input-container">
          <input type="text" id="message-input" placeholder="Type a message..." required autocomplete="off">
          <button type="submit" class="send-button">
            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
            </svg>
          </button>
        </div>
      </form>
    </div>

    <!-- Resize Handle -->
    <div id="resize-handle"></div>
  </div>

  <!-- Export Data Modal -->
  <div id="export-modal" class="modal" style="display: none;">
    <div class="modal-content export-modal-content">
      <div class="modal-header">
        <h2>üì• Export Data</h2>
        <button class="modal-close" id="close-export-modal">&times;</button>
      </div>
      
      <div class="modal-body">
        <div class="export-section">
          <h3>Select Data to Export</h3>
          <div class="export-options">
            <label class="export-checkbox">
              <input type="checkbox" id="export-projects" checked>
              <span class="export-label">
                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>
                </svg>
                Projects
              </span>
            </label>
            
            <label class="export-checkbox">
              <input type="checkbox" id="export-tasks" checked>
              <span class="export-label">
                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                </svg>
                Tasks
              </span>
            </label>
            
            <label class="export-checkbox">
              <input type="checkbox" id="export-attachments">
              <span class="export-label">
                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"/>
                </svg>
                Attachments Info
              </span>
            </label>
            
            <label class="export-checkbox">
              <input type="checkbox" id="export-activity">
              <span class="export-label">
                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                Activity Logs
              </span>
            </label>
            
            <label class="export-checkbox">
              <input type="checkbox" id="export-chat">
              <span class="export-label">
                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                </svg>
                Chat Messages
              </span>
            </label>
          </div>
        </div>
        
        <div class="export-section">
          <h3>Export Format</h3>
          <div class="export-format-options">
            <label class="export-radio">
              <input type="radio" name="export-format" value="json" checked>
              <span class="format-option">
                <strong>JSON</strong>
                <small>Best for developers & data processing</small>
              </span>
            </label>
            
            <label class="export-radio">
              <input type="radio" name="export-format" value="csv">
              <span class="format-option">
                <strong>CSV</strong>
                <small>Best for Excel & spreadsheets</small>
              </span>
            </label>
          </div>
        </div>
        
        <div class="export-info">
          <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          <span>Export includes all selected data with full details and relationships.</span>
        </div>
      </div>
      
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancel-export">Cancel</button>
        <button class="btn btn-primary" id="confirm-export">
          <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
          </svg>
          Export Data
        </button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
  <script src="script.js"></script>
</body>
</html>